{"version":3,"sources":["core.js","events.js","get.js","jsonfn.js","mule.js","post.js","xhr.js"],"names":["window","init","jaxxy","modules","set","method","func","get","post","default","Date","getTime","xhr","events","on","el","eventName","handler","bubble","addEventListener","attachEvent","call","off","removeEventListener","detachEvent","url","data","async","successCallbacks","errorCallbacks","returnObj","then","a","push","error","handleCallbacks","callbacks","b","i","length","success","jsonfn","stringify","obj","JSON","key","value","Function","toString","RegExp","parse","str","date2obj","iso8061","prefix","substring","match","eval","slice","clone","mule","ready","postQueue","getQueue","messageQueue","randomTo","from","to","Math","floor","random","genID","id","payload","parentID","prev","d","parent","postMessage","e","console","log","element","contentWindow","muleServer","setGet","setPost","__muleReceiver","document","createElement","src","style","display","onload","body","appendChild","warn","event","k","undefined","message","formData","FormData","append","type","successCallback","errorCallback","request","XMLHttpRequest","isAsync","open","onreadystatechange","this","readyState","status","responseText","send"],"mappings":"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","file":"jaxxy.min.js","sourcesContent":["/*This is the base file, where any core items will be placed, such namespacing and promises*/\r\n\r\n(function (window) {\r\n\t\"use strict\";\r\n\tvar init = function () {\r\n\r\n\t\tvar jaxxy = {\r\n\t\t\tmodules: {},\r\n\t\t\tset: function (method, func) {\r\n\t\t\t\tif (method === 'get') {\r\n\t\t\t\t\tjaxxy.get = func;\r\n\t\t\t\t}\r\n\t\t\t\telse if (method === 'post') {\r\n\t\t\t\t\tjaxxy.post = func;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdefault: function (method) {\r\n\t\t\t\tif (method === 'get') {\r\n\t\t\t\t\tjaxxy.get = jaxxy.modules.get;\r\n\t\t\t\t}\r\n\t\t\t\telse if (method === 'post') {\r\n\t\t\t\t\tjaxxy.get = jaxxy.modules.post;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn jaxxy;\r\n\t}\r\n\r\n\twindow['jaxxy-' + new Date().getTime()] = window.jaxxy = init();\r\n\r\n}(window));","/*Adds a post method shortcut*/\r\n(function (window) {\r\n\t\"use strict\";\r\n\r\n\tif (typeof jaxxy === 'undefined' || !!jaxxy.modules.xhr) return false;\r\n\t\r\n\tvar events  = {};\r\n\r\n\tevents.on = function (el, eventName, handler, bubble) {\r\n\t\tif (el.addEventListener) {\r\n\t\t\tel.addEventListener(eventName, handler, bubble);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tel.attachEvent('on' + eventName, function() {\r\n\t\t\t\thandler.call(el);\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\r\n\tevents.off = function (el, eventName, handler) {\r\n\t\tif (el.removeEventListener) el.removeEventListener(eventName, handler);\r\n\t\telse el.detachEvent('on' + eventName, handler);\r\n\t};\r\n\r\n\r\n\tjaxxy.modules.events = events;\r\n\r\n}(window));\r\n\r\n\t\t","/*Adds a post method shortcut*/\r\n(function (window) {\r\n\t\"use strict\";\r\n\r\n\tif (typeof jaxxy === 'undefined' || !!jaxxy.modules.get) return false;\r\n\tvar get = function (url, data, async) {\r\n\t\tvar successCallbacks = [],\r\n\t\t\terrorCallbacks = [],\r\n\t\t\treturnObj = {\r\n\t\t\t\tthen: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") successCallbacks.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t\terror: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") errorCallbacks.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thandleCallbacks = function (callbacks) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\tfor (var i = 0; i < callbacks.length; i++) {\r\n\t\t\t\t\t\tcallbacks[i](a, b);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturnObj.success = returnObj.then;\r\n\r\n\r\n\t\t\tjaxxy.modules.xhr(\"GET\", url, data, async, handleCallbacks(successCallbacks), handleCallbacks(errorCallbacks))\r\n\r\n\r\n\t\treturn returnObj;\r\n\t}\r\n\r\n\tjaxxy.modules.get = get;\r\n\tjaxxy.set('get', get);\r\n}(window));\r\n\r\n\t\t","/**\r\n* JSONfn - javascript (both node.js and browser) plugin to stringify, \r\n*          parse and clone objects with Functions, Regexp and Date.\r\n*  \r\n* Version - 0.60.00\r\n* Copyright (c) 2012 - 2014 Vadim Kiryukhin\r\n* vkiryukhin @ gmail.com\r\n* http://www.eslinstructor.net/jsonfn/\r\n* \r\n* Licensed under the MIT license ( http://www.opensource.org/licenses/mit-license.php )\r\n*\r\n*   USAGE:\r\n*     browser:\r\n*         JSONfn.stringify(obj);\r\n*         JSONfn.parse(str[, date2obj]);\r\n*         JSONfn.clone(obj[, date2obj]);\r\n*\r\n*     nodejs:\r\n*       var JSONfn = require('path/to/json-fn');\r\n*       JSONfn.stringify(obj);\r\n*       JSONfn.parse(str[, date2obj]);\r\n*       JSONfn.clone(obj[, date2obj]);\r\n*\r\n*\r\n*     @obj      -  Object;\r\n*     @str      -  String, which is returned by JSONfn.stringify() function; \r\n*     @date2obj - Boolean (optional); if true, date string in ISO8061 format\r\n*                 is converted into a Date object; otherwise, it is left as a String.\r\n*/\r\n\r\n\r\n(function (window) {\r\n\r\n  \"use strict\";\r\n  if (typeof jaxxy === 'undefined' || !!jaxxy.modules.jsonfn) return false;\r\n\r\n  var jsonfn = {};\r\n\r\n  jsonfn.stringify = function (obj) {\r\n\r\n    return JSON.stringify(obj, function (key, value) {\r\n      if (value instanceof Function || typeof value == 'function') {\r\n        return value.toString();\r\n      }\r\n      if (value instanceof RegExp) {\r\n        return '_PxEgEr_' + value;\r\n      }\r\n      return value;\r\n    });\r\n  };\r\n\r\n  jsonfn.parse = function (str, date2obj) {\r\n\r\n    var iso8061 = date2obj ? /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/ : false;\r\n\r\n    return JSON.parse(str, function (key, value) {\r\n      var prefix;\r\n\r\n      if (typeof value != 'string') {\r\n        return value;\r\n      }\r\n      if (value.length < 8) {\r\n        return value;\r\n      }\r\n\r\n      prefix = value.substring(0, 8);\r\n\r\n      if (iso8061 && value.match(iso8061)) {\r\n        return new Date(value);\r\n      }\r\n      if (prefix === 'function') {\r\n        return eval('(' + value + ')');\r\n      }\r\n      if (prefix === '_PxEgEr_') {\r\n        return eval(value.slice(8));\r\n      }\r\n\r\n      return value;\r\n    });\r\n  };\r\n\r\n  jsonfn.clone = function (obj, date2obj) {\r\n    return jsonfn.parse(jsonfn.stringify(obj), date2obj);\r\n  };\r\n\r\n  jaxxy.modules.jsonfn = jsonfn;\r\n\r\n}(window));\r\n\r\n\r\n","/*Utilities for the cors avoiding mule*/\r\n(function (window) {\r\n\t\"use strict\";\r\n\r\n\tif (typeof jaxxy === 'undefined' || !!jaxxy.modules.mule) return false;\r\n\tvar mule = {\r\n\t\tready:false,\r\n\t\tpostQueue:[],\r\n\t\tgetQueue:[],\r\n\t\tmessageQueue:{}\r\n\t},\r\n\r\n\tevents = jaxxy.modules.events;\r\n\r\n\tmule.randomTo = function (from, to) {\r\n\t\treturn Math.floor(Math.random() * (to - from + 1) + from);\r\n\t};\r\n\r\n\tmule.genID = function () {\r\n\t\treturn (new Date().getTime()) + '-' + mule.randomTo(100000,999999) + '-' + mule.randomTo(100000,999999)  + '-' + mule.randomTo(100000,999999);\r\n\t};\r\n\r\n\tmule.post = function(url, data, func) {\r\n\t\tif(!mule.ready) {\r\n\t\t\tmule.postQueue.push([url, data, func]);\r\n\t\t\treturn mule;\r\n\t\t}\r\n\r\n\r\n\t\tvar id = mule.genID(),\r\n\t\t\treturnObj = {\r\n\t\t\t\tthen: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") mule.messageQueue[id].then.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") mule.messageQueue[id].success.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t\terror: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") mule.messageQueue[id].error.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\r\n\t\t\thandleCallbacks = function (callbacks) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\tfor (var i = 0; i < callbacks.length; i++) {\r\n\t\t\t\t\t\tcallbacks[i](a, b);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpayload = jaxxy.modules.jsonfn.stringify({id:id, parentID: mule.parentID, url: url, data:data, func: function(prev) {\r\n\t\t\t\tjaxxy.post(prev.url, prev.data, prev.async)\r\n\t\t\t\t\t.success(function (d) {\r\n\t\t\t\t\t\tparent.postMessage(jaxxy.modules.jsonfn.stringify({parentID: prev.parentID, id:prev.id, data:d}), \"*\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function (e) {\r\n\t\t\t\t\t\tparent.postMessage(jaxxy.modules.jsonfn.stringify({parentID: prev.parentID, id:prev.id, data:false, error: e}), \"*\");\r\n\t\t\t\t\t\tif(console) console.log(JSON.stringify(e))\r\n\t\t\t\t\t});\r\n\t\t\t}});\r\n\t\tmule.element.contentWindow.postMessage(payload, \"*\");\r\n\t\tmule.messageQueue[id] = {success: [], error: [], then: []};\r\n\t\treturnObj.then(func);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\treturn returnObj\r\n\t};\r\n\r\n\tmule.get = function(url, data, func) {\r\n\t\tif(!mule.ready) {\r\n\t\t\tmule.getQueue.push([url, data, func]);\r\n\t\t\treturn mule;\r\n\t\t}\r\n\r\n\r\n\t\tvar id = mule.genID(),\r\n\t\t\treturnObj = {\r\n\t\t\t\tthen: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") mule.messageQueue[id].then.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") mule.messageQueue[id].success.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t\terror: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") mule.messageQueue[id].error.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thandleCallbacks = function (callbacks) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\tfor (var i = 0; i < callbacks.length; i++) {\r\n\t\t\t\t\t\tcallbacks[i](a, b);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpayload = jaxxy.modules.jsonfn.stringify({id:id, parentID: mule.parentID, data: data, url: url, func: function(prev) {\r\n\t\t\t\tjaxxy.get(prev.url, prev.data, prev.async)\r\n\t\t\t\t\t.success(function (d) {\r\n\t\t\t\t\t\tparent.postMessage(jaxxy.modules.jsonfn.stringify({parentID: prev.parentID, id:prev.id, data:d}), \"*\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.error(function (e) {\r\n\t\t\t\t\t\tparent.postMessage(jaxxy.modules.jsonfn.stringify({parentID: prev.parentID, id:prev.id, data:false, error: e}), \"*\");\r\n\t\t\t\t\t\tif(console) console.log(JSON.stringify(e))\r\n\t\t\t\t\t});\r\n\t\t\t}});\r\n\t\tmule.element.contentWindow.postMessage(payload, \"*\");\r\n\t\tmule.messageQueue[id] = {success: [], error: [], then: []};\r\n\t\treturnObj.then(func)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\treturn returnObj\r\n\t};\r\n\r\n\tmule.init = function (muleServer, setGet, setPost) {\r\n\t\tif (!muleServer) {\r\n\t\t\treturn console.warn('Ignored - no server was specified');\t\t\t\r\n\t\t}\r\n\r\n\t\tif (!!setGet) jaxxy.set('get', mule.get);\r\n\r\n\t\tif (!!setPost) jaxxy.set('post', mule.post);\r\n\r\n\t\tmule.muleServer = muleServer;\r\n\t\t\r\n\t\tmule.parentID = mule.genID();\r\n\r\n\t\t//events.off(window, \"message\", jaxxy.__muleReceiver);\r\n\r\n\t\tevents.on(window, \"message\", mule.__muleReceiver);\r\n\r\n\t\tmule.element = document.createElement('iframe');\r\n\r\n\t\tmule.element.src = mule.muleServer;\r\n\r\n\t\tmule.element.style.display = 'none';\r\n\r\n\t\tevents.on(mule.element, 'load', function () {\r\n\t\t\tmule.ready = true;\r\n\t\t\tfor(var i in mule.getQueue){\r\n\t\t\t\tmule.get(mule.getQueue[i][0], mule.getQueue[i][1], mule.getQueue[i][2]);\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i in mule.postQueue){\r\n\t\t\t\tmule.post(mule.postQueue[i][0], mule.postQueue[i][1], mule.postQueue[i][2]);\r\n\t\t\t}\r\n\t\t\tmule.element.onload = null;\r\n\t\t});\r\n\r\n\t\tdocument.body.appendChild(mule.element);\r\n\t}\r\n\r\n\tmule.__muleReceiver = function (event) {\r\n\t\tif (event.data) {\r\n\t\t\ttry {\r\n\t\t\t\tvar k = jaxxy.modules.jsonfn.parse(event.data);\r\n\t\t\t\tif(!!k && !!mule.messageQueue[k.id] && !!k.id) {\r\n\t\t\t\t\tif (!k.error) for (var i in mule.messageQueue[k.id].success) {\r\n\t\t\t\t\t\t(mule.messageQueue[k.id].success[i] || function () {})(k.data, k);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse for (var i in mule.messageQueue[k.id].error) {\r\n\t\t\t\t\t\t(mule.messageQueue[k.id].error[i] || function () {})(k.error, k);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n \t\t\t\t\tfor (var i in mule.messageQueue[k.id].then) {\r\n\t\t\t\t\t\t(mule.messageQueue[k.id].then[i] || function () {})(k.error, k.data, k);\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (typeof console !== null && typeof console !== undefined) {\r\n\t\t\t\t\tconsole.error(e.message)\r\n\t\t\t\t\tfor (var i in mule.messageQueue[k.id][i].error) {\r\n\t\t\t\t\t\t(mule.messageQueue[k.id].error[i] || function () {})(e, k);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t\r\n\tjaxxy.modules.mule = mule;\r\n\r\n\r\n\r\n}(window));","/*Adds a post method shortcut*/\r\n(function (window) {\r\n\t\"use strict\";\r\n\r\n\tif (typeof jaxxy === 'undefined' || !!jaxxy.modules.post) return false;\r\n\tvar post = function (url, data, async) {\r\n\t\tvar successCallbacks = [],\r\n\t\t\terrorCallbacks = [],\r\n\t\t\treturnObj = {\r\n\t\t\t\tsuccess: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") successCallbacks.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t\tthen: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") successCallbacks.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t\terror: function (a) {\r\n\t\t\t\t\tif (typeof a === \"function\") errorCallbacks.push(a);\r\n\t\t\t\t\treturn returnObj;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\thandleCallbacks = function (callbacks) {\r\n\t\t\t\treturn function (a, b) {\r\n\t\t\t\t\tfor (var i = 0; i < callbacks.length; i++) {\r\n\t\t\t\t\t\tcallbacks[i](a, b);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturnObj.success = returnObj.then;\r\n\t\t\tvar formData = new FormData();\r\n\t\t\tfor (var i in data) {\r\n\t\t\t\tformData.append(i, data[i]);\r\n\t\t\t}\r\n\r\n\t\t\tjaxxy.modules.xhr(\"POST\", url, formData, async, handleCallbacks(successCallbacks), handleCallbacks(errorCallbacks))\r\n\r\n\r\n\t\treturn returnObj;\r\n\t};\r\n\r\n\tjaxxy.modules.post = post;\r\n\tjaxxy.set('post', post);\r\n\r\n}(window));","/*Adds a post method shortcut*/\r\n(function (window) {\r\n\t\"use strict\";\r\n\r\n\tif (typeof jaxxy === 'undefined' || !!jaxxy.modules.xhr) return false;\r\n\tvar xhr = function (type, url, data, async, successCallback, errorCallback) {\r\n\t\tvar request = new XMLHttpRequest(),\r\n\t\t\tisAsync = (typeof async === \"null\" || typeof async === \"undefined\"  || !!async ? true : false);\r\n\t\t\r\n\t\t//Type: GET/POST\r\n\t\t//Url: URL to get/post\r\n\t\t//Async: is this async or not (defaults to async)\r\n\t\trequest.open(type, url,  isAsync);\r\n\r\n\t\trequest.onreadystatechange = function() {\r\n\t\t\tif (this.readyState === 4) {\r\n\t\t\t\tif (this.status >= 200 && this.status < 400) {\r\n\t\t\t\t\t// Success!\r\n\t\t\t\t\tif (typeof successCallback === \"function\") successCallback(this.responseText, this);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (typeof errorCallback === \"function\") errorCallback(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\trequest.send(data);\r\n\t\trequest = null;\r\n\t};\r\n\r\n\tjaxxy.modules.xhr = xhr;\r\n}(window));\r\n\r\n\t\t"],"sourceRoot":"/source/"}