!function(e){"use strict";var n=function(){var e={modules:{},set:function(n,t){"get"===n?e.get=t:"post"===n&&(e.post=t)},"default":function(n){"get"===n?e.get=e.modules.get:"post"===n&&(e.get=e.modules.post)}};return e};e["jaxxy-"+(new Date).getTime()]=e.jaxxy=n()}(window),function(e){"use strict";if("undefined"==typeof jaxxy||jaxxy.modules.xhr)return!1;var n={};n.on=function(e,n,t){e.addEventListener?e.addEventListener(n,t):e.attachEvent("on"+n,function(){t.call(e)})},n.off=function(e,n,t){e.removeEventListener?e.removeEventListener(n,t):e.detachEvent("on"+n,t)},jaxxy.modules.events=n}(window),function(e){"use strict";if("undefined"==typeof jaxxy||jaxxy.modules.get)return!1;var n=function(e,n,t){var o=[],u=[],s={then:function(e){return"function"==typeof e&&o.push(e),s},error:function(e){return"function"==typeof e&&u.push(e),s}},r=function(e){return function(n,t){for(var o=0;o<e.length;o++)e[o](n,t)}};return s.success=s.then,jaxxy.modules.xhr("GET",e,n,t,r(o),r(u)),s};jaxxy.modules.get=n,jaxxy.set("get",n)}(window),function(window){"use strict";if("undefined"==typeof jaxxy||jaxxy.modules.jsonfn)return!1;var jsonfn={};jsonfn.stringify=function(e){return JSON.stringify(e,function(e,n){return n instanceof Function||"function"==typeof n?n.toString():n instanceof RegExp?"_PxEgEr_"+n:n})},jsonfn.parse=function(str,date2obj){var iso8061=date2obj?/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/:!1;return JSON.parse(str,function(key,value){var prefix;return"string"!=typeof value?value:value.length<8?value:(prefix=value.substring(0,8),iso8061&&value.match(iso8061)?new Date(value):"function"===prefix?eval("("+value+")"):"_PxEgEr_"===prefix?eval(value.slice(8)):value)})},jsonfn.clone=function(e,n){return jsonfn.parse(jsonfn.stringify(e),n)},jaxxy.modules.jsonfn=jsonfn}(window);var tttt;!function(e){"use strict";if("undefined"==typeof jaxxy||jaxxy.modules.mule)return!1;var n={ready:!1,postQueue:[],getQueue:[],messageQueue:{}},t=jaxxy.modules.events;n.randomTo=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},n.genID=function(){return(new Date).getTime()+"-"+n.randomTo(1e5,999999)+"-"+n.randomTo(1e5,999999)+"-"+n.randomTo(1e5,999999)},n.post=function(e,t,o){if(!n.ready)return n.postQueue.push([e,t,o]),!1;var u=n.genID(),s=jaxxy.modules.jsonfn.stringify({id:u,parentID:n.parentID,url:n.server,data:t,func:function(e){}});n.element.contentWindow.postMessage(s,"*"),n.messageQueue[u]=function(e){o(e)}},n.get=function(e,t,o){if(!n.ready)return n.getQueue.push([e,t,o]),!1;var u=n.genID(),s=jaxxy.modules.jsonfn.stringify({id:u,parentID:n.parentID,url:e,data:t,func:function(e){jaxxy.get(e.url).success(function(n){parent.postMessage(jaxxy.modules.jsonfn.stringify({parentID:e.parentID,id:e.id,data:n}),"*")}).error(function(e){console&&console.log(JSON.stringify(e))})}});n.element.contentWindow.postMessage(s,"*"),n.messageQueue[u]=o},n.init=function(o,u,s){return o?(u&&jaxxy.set("get",n.get),s&&jaxxy.set("post",n.post),n.muleServer=o,n.parentID=n.genID(),t.on(e,"message",n.__muleReceiver),n.element=document.createElement("iframe"),n.element.src=n.muleServer,n.element.style.display="none",t.on(n.element,"load",function(){n.ready=!0;for(var e in n.getQueue)n.get(n.getQueue[e][0],n.getQueue[e][1],n.getQueue[e][2]);for(var e in n.postQueue)n.post(n.postQueue[e][0],n.postQueue[e][1],n.postQueue[e][2]);n.element.onload=null}),void document.body.appendChild(n.element)):console.warn("Ignored - no server was specified")},n.__muleReceiver=function(e){if(e.data)try{var t=jaxxy.modules.jsonfn.parse(e.data);console.log(n.messageQueue[t.id]),t&&n.messageQueue[t.id]&&t.id&&n.messageQueue[t.id](t)}catch(o){null!==typeof console&&void 0!==typeof console&&console.error(o.message)}},jaxxy.modules.mule=n}(window),function(e){"use strict";if("undefined"==typeof jaxxy||jaxxy.modules.post)return!1;var n=function(e,n,t){var o=[],u=[],s={then:function(e){"function"==typeof e&&o.push(e)},error:function(e){"function"==typeof e&&u.push(e)}},r=function(e){return function(n,t){for(var o=0;o<e.length;o++)e[o](n,t)}};return s.success=s.then,jaxxy.xhr("POST",e,n,t,r(o),r(u)),s};jaxxy.modules.post=n,jaxxy.set("post",n)}(window),function(e){"use strict";if("undefined"==typeof jaxxy||jaxxy.modules.xhr)return!1;var n=function(e,n,t,o,u,s){var r=new XMLHttpRequest,i="null"==typeof o||"undefined"==typeof o||o?!0:!1;r.open(e,n,i),r.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?"function"==typeof u&&u(this.responseText,this):"function"==typeof s&&s(this))},r.send(t),r=null};jaxxy.modules.xhr=n}(window);
//# sourceMappingURL=jaxxy.min.js.map